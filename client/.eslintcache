[{"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/MainComponent.js":"1","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/MainJumbotron.js":"2","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/SciJumbotron.js":"3","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/EcoJumbotron.js":"4","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/TechJumbotron.js":"5","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/SportJumbotron.js":"6","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Write.js":"7","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/axios.js":"8","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/firebaseConfig.js":"9","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/HomeCard.js":"10","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Article.js":"11","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Card.js":"12","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Navbar.js":"13","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Footer.js":"14"},{"size":8389,"mtime":1613139194185,"results":"15","hashOfConfig":"16"},{"size":389,"mtime":1612022489065,"results":"17","hashOfConfig":"16"},{"size":384,"mtime":1612022492259,"results":"18","hashOfConfig":"16"},{"size":389,"mtime":1613024907559,"results":"19","hashOfConfig":"16"},{"size":389,"mtime":1612022504740,"results":"20","hashOfConfig":"16"},{"size":382,"mtime":1612022502293,"results":"21","hashOfConfig":"16"},{"size":3103,"mtime":1613135296051,"results":"22","hashOfConfig":"16"},{"size":196,"mtime":1612683447702,"results":"23","hashOfConfig":"16"},{"size":425,"mtime":1612861235202,"results":"24","hashOfConfig":"16"},{"size":2809,"mtime":1612984949070,"results":"25","hashOfConfig":"16"},{"size":3227,"mtime":1613134315450,"results":"26","hashOfConfig":"16"},{"size":1526,"mtime":1613134224587,"results":"27","hashOfConfig":"16"},{"size":2417,"mtime":1613126228563,"results":"28","hashOfConfig":"16"},{"size":1314,"mtime":1613136808814,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32"},"1h3qg2l",{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/MainComponent.js",["62"],"import React, { useState, useEffect } from \"react\";\nimport Navbarr from \"./Navbar\";\nimport Footer from \"./Footer\";\nimport {\n  Route,\n  Redirect,\n  Switch,\n  useHistory,\n  useParams,\n} from \"react-router-dom\";\nimport MainJumbotron from \"./jumbotrons/MainJumbotron\";\nimport EcoJumbotron from \"./jumbotrons/EcoJumbotron\";\nimport TechJumbotron from \"./jumbotrons/TechJumbotron\";\nimport SportJumbotron from \"./jumbotrons/SportJumbotron\";\nimport SciJumbotron from \"./jumbotrons/SciJumbotron\";\nimport Article from \"./Article\";\nimport Write from \"./Write\";\nimport Cardd from \"./Card\";\nimport HomeCard from \"./HomeCard\";\nimport firebase from \"firebase/app\";\nimport firebaseConfig from \"../firebaseConfig\";\nimport \"firebase/auth\";\nimport axios from \"../axios\";\n\nfirebase.initializeApp(firebaseConfig);\nconst Main = () => {\n  const [initializing, setInitializing] = useState(false);\n  const [user, setUser] = useState(() => firebase.auth.currentUser);\n\n  const history = useHistory();\n\n  const signInWithGoogle = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().useDeviceLanguage();\n    try {\n      await firebase\n        .auth()\n        .signInWithPopup(provider)\n        .then((result) => {\n          authenticate(result.credential.idToken, result.user);\n        });\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        console.log(user);\n        setUser(user);\n        localStorage.setItem(\"email\", user.email);\n        localStorage.setItem(\"accessToken\", user.za);\n        localStorage.setItem(\"name\", user.displayName);\n        updateAuthenticate(user.za, user.email);\n      } else {\n        setUser(false);\n      }\n      if (initializing) {\n        setInitializing(false);\n      }\n    });\n\n    // Cleanup subscription\n    return unsubscribe;\n  }, [initializing]);\n\n  const signOut = async () => {\n    try {\n      await firebase.auth().signOut();\n      setUser(false);\n      localStorage.removeItem(\"email\");\n      localStorage.removeItem(\"accessToken\");\n      localStorage.removeItem(\"name\");\n      history.push(\"/\");\n      console.log(\"signing out\");\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  const authenticate = (idToken, user) => {\n    const userData = {\n      name: user.displayName,\n      photoUrl: user.photoURL,\n      accessToken: user.za,\n      email: user.email,\n    };\n    console.log(userData);\n    console.log(idToken);\n    axios\n      .post(\"/authenticate\", { idToken: idToken, userData: userData })\n      .then((res) => {\n        console.log(res);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const updateAuthenticate = (accessToken, email) => {\n    console.log(email);\n    axios\n      .post(\"/authenticate/update\", { accessToken: accessToken, email: email })\n      .then((res) => {\n        console.log(res);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const Home = () => {\n    return (\n      <>\n        <MainJumbotron />\n        <HomeCard />\n      </>\n    );\n  };\n\n  const Eco = () => {\n    const [data, setData] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n      axios\n        .get(\"/economical\")\n        .then((articles) => {\n          setData(articles.data);\n          setIsLoading(false);\n          // console.log(articles.data);\n        })\n        .catch((err) => console.log(err));\n    }, []);\n\n    if(isLoading) {\n      return (\n        <div>\n          <h1>Loading...</h1>\n        </div>\n      );\n    }\n\n    return (\n      <>\n        <EcoJumbotron />\n        <Cardd data={data} topic={\"economical\"} />\n      </>\n    );\n  };\n\n  const Tech = () => {\n    const [data, setData] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n      axios\n        .get(\"/technical\")\n        .then((articles) => {\n          setData(articles.data);\n          setIsLoading(false);\n          // console.log(articles.data);\n        })\n        .catch((err) => console.log(err));\n    }, []);\n\n    if(isLoading) {\n      return (\n        <div>\n          <h1>Loading...</h1>\n        </div>\n      );\n    }\n\n    return (\n      <>\n        <TechJumbotron />\n        <Cardd data={data} topic={\"technical\"} />\n      </>\n    );\n  };\n\n  const Sport = () => {\n    const [data, setData] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n      axios\n        .get(\"/sport\")\n        .then((articles) => {\n          setData(articles.data);\n          setIsLoading(false);\n          // console.log(articles.data);\n        })\n        .catch((err) => console.log(err));\n    }, []);\n\n    if (isLoading) {\n      return (\n        <div>\n          <h1>Loading...</h1>\n        </div>\n      );\n    }\n\n    return (\n      <>\n        <SportJumbotron />\n        <Cardd data={data} topic={\"sport\"} />\n      </>\n    );\n  };\n\n  const Sci = () => {\n    const [data, setData] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n      axios\n        .get(\"/science\")\n        .then((articles) => {\n          setData(articles.data);\n          setIsLoading(false);\n        })\n        .catch((err) => console.log(err));\n    }, []);\n\n    if (isLoading) {\n      return (\n        <div>\n          <h1>Loading...</h1>\n        </div>\n      );\n    }\n\n    return (\n      <>\n        <SciJumbotron />\n        <Cardd data={data} topic={\"science\"} />\n      </>\n    );\n  };\n\n  const Add = () => {\n    return (\n      <>\n        {user && (\n          <Write\n            email={localStorage.getItem(\"email\")}\n            author={localStorage.getItem(\"name\")}\n            accessToken={localStorage.getItem(\"accessToken\")}\n          />\n        )}\n      </>\n    );\n  };\n\n  const DetailedCard = () => {\n    const [article, setArticle] = useState();\n    const { topic, id } = useParams();\n    const [alreadyLiked, setAlreadyLiked] = useState(false);\n    const [alreadyDisliked, setAlreadyDisliked] = useState(false);\n    const [isLoading1, setIsLoading1] = useState(true);\n    const [isLoading2, setIsLoading2] = useState(true);\n    // console.log(topic, id, article);\n\n    useEffect(() => {\n      console.log(\"inside useeffect\");\n      const email = localStorage.getItem(\"email\");\n      const accessToken = localStorage.getItem(\"accessToken\");\n\n      const config = {\n        headers: {\n            email : email,\n            accessToken : accessToken\n        }\n      };\n\n      axios\n        .get(`/${topic}/${id}`, config)\n        .then((response) => {\n          setArticle(response.data);\n          console.log(response.data);\n          setIsLoading1(false)\n        })\n        .catch((err) => console.log(err));\n\n      if (email) {\n        axios\n          .get(`user/${email}`, config)\n          .then((response) => {\n            if (response) {\n              console.log(response);\n              setAlreadyLiked(response.data[0].likedArticleId.includes(id));\n              setAlreadyDisliked(response.data[0].dislikedArticleId.includes(id));\n              setIsLoading2(false);\n              // console.log(alreadyLiked, alreadyDisliked);\n            }\n          })\n          .catch((err) => console.log(err));\n      }\n    }, []);\n\n    if (isLoading1 || isLoading2) {\n      return (\n        <div>\n          <h1>Loading...</h1>\n        </div>\n      );\n    }\n\n    return (\n      <Article\n        article={article}\n        alreadyLiked={alreadyLiked}\n        alreadyDisliked={alreadyDisliked}\n        setAlreadyDisliked={setAlreadyDisliked}\n        setAlreadyLiked={setAlreadyLiked}\n        topic={topic}\n        email={localStorage.getItem(\"email\")}\n      />\n    );\n  };\n\n  return (\n    <div>\n      <Navbarr\n        user={user}\n        signInWithGoogle={signInWithGoogle}\n        signOut={signOut}\n      />\n      <Switch history={history}>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/economical\" component={Eco} />\n        <Route exact path=\"/technical\" component={Tech} />\n        <Route exact path=\"/sport\" component={Sport} />\n        <Route exact path=\"/science\" component={Sci} />\n        <Route exact path=\"/write\" component={Add} />\n        <Route exact path=\"/:topic/:heading/:id\" component={DetailedCard} />\n        <Redirect to=\"/\" />\n      </Switch>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Main;\n","/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/MainJumbotron.js",[],["63","64"],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/SciJumbotron.js",[],["65","66"],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/EcoJumbotron.js",[],["67","68"],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/TechJumbotron.js",[],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/jumbotrons/SportJumbotron.js",[],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Write.js",["69"],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/axios.js",[],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/firebaseConfig.js",[],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/HomeCard.js",[],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Article.js",["70","71","72"],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Card.js",["73"],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Navbar.js",[],"/home/iamvikasthakur/Desktop/webdev/reactApp/article/src/components/Footer.js",[],{"ruleId":"74","severity":1,"message":"75","line":299,"column":8,"nodeType":"76","endLine":299,"endColumn":10,"suggestions":"77"},{"ruleId":"78","replacedBy":"79"},{"ruleId":"80","replacedBy":"81"},{"ruleId":"78","replacedBy":"82"},{"ruleId":"80","replacedBy":"83"},{"ruleId":"78","replacedBy":"84"},{"ruleId":"80","replacedBy":"85"},{"ruleId":"86","severity":1,"message":"87","line":10,"column":3,"nodeType":"88","messageId":"89","endLine":10,"endColumn":8},{"ruleId":"90","severity":1,"message":"91","line":37,"column":25,"nodeType":"92","messageId":"93","endLine":37,"endColumn":27},{"ruleId":"90","severity":1,"message":"91","line":46,"column":22,"nodeType":"92","messageId":"93","endLine":46,"endColumn":24},{"ruleId":"74","severity":1,"message":"94","line":54,"column":6,"nodeType":"76","endLine":54,"endColumn":21,"suggestions":"95"},{"ruleId":"90","severity":1,"message":"96","line":20,"column":38,"nodeType":"92","messageId":"93","endLine":20,"endColumn":40},"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'id' and 'topic'. Either include them or remove the dependency array.","ArrayExpression",["97"],"no-native-reassign",["98"],"no-negated-in-lhs",["99"],["98"],["99"],["98"],["99"],"no-unused-vars","'Alert' is defined but never used.","Identifier","unusedVar","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","React Hook useEffect has missing dependencies: 'alreadyDisliked', 'alreadyLiked', 'article._id', 'disliked', 'email', 'liked', and 'topic'. Either include them or remove the dependency array.",["100"],"Expected '===' and instead saw '=='.",{"desc":"101","fix":"102"},"no-global-assign","no-unsafe-negation",{"desc":"103","fix":"104"},"Update the dependencies array to be: [id, topic]",{"range":"105","text":"106"},"Update the dependencies array to be: [like, dislike, alreadyLiked, alreadyDisliked, topic, article._id, disliked, liked, email]",{"range":"107","text":"108"},[7264,7266],"[id, topic]",[1412,1427],"[like, dislike, alreadyLiked, alreadyDisliked, topic, article._id, disliked, liked, email]"]